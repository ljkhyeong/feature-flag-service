# 회고 - 2025-09-02

## 오늘 한 일
- FeatureFlag 업데이트/토글 API 프로토타입 구현
    - `PUT /api/flags/{id}`로 enabled 상태 수정
    - `PATCH /api/flags/{id}/toggle`로 활성화/비활성 전환
    - 서비스 레이어에 `@CacheEvict` 및 CacheManager 직접 evict 추가
- 업데이트/토글 시나리오 E2E 테스트 작성
    - 최초 조회 → 캐시 적재
    - 업데이트/토글 → 캐시 무효화 확인
    - 재조회 → 최신 상태 반영 검증
- e2e.md, ADR-001 문서 업데이트
    - 업데이트/토글 무효화 정책 기록


## 배운 점
- id 기반 API(`toggle`)는 SpEL만으로 캐시 키를 계산하기 어려움 → CacheManager 직접 사용 필요
- 캐시 프리픽스/TTL 설정 후 redis-cli로 확인하면 정책이 잘 반영됐는지 바로 검증 가능


## 아쉬운 점
- 키/환경 자체가 변경되는 update 시 **예전 키 삭제 정책**은 아직 확정하지 못했다
- REST Docs 스니펫을 업데이트/토글 케이스에 바로 붙이지 못했다

## 다음 할 일
- update 시 key/env 변경 → 옛날 캐시 키 삭제 정책 확정
- 업데이트/토글 API에 REST Docs 테스트 추가
- 성능 테스트(K6)로 업데이트/토글이 빈번할 때 캐시 부하 측정

## 느낀 점
- 이제 “읽기 → 캐시 → 쓰기/토글 시 무효화”라는 캐싱 사이클이 갖춰졌다.
- 작은 개선을 하루 단위로 E2E + 문서까지 닫아두니 심리적 안정감이 크다.
